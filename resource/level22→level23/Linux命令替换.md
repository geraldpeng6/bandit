# Linuxå‘½ä»¤æ›¿æ¢è¯¦è§£ ğŸ”„

## ä»€ä¹ˆæ˜¯å‘½ä»¤æ›¿æ¢ï¼Ÿ ğŸ¤”

å‘½ä»¤æ›¿æ¢æ˜¯Shellç¼–ç¨‹ä¸­çš„ä¸€ç§å¼ºå¤§åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ å°†å‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°æˆ–èµ‹å€¼ç»™å˜é‡ã€‚é€šè¿‡å‘½ä»¤æ›¿æ¢ï¼Œä½ å¯ä»¥åŠ¨æ€åœ°ç”Ÿæˆå‘½ä»¤å‚æ•°æˆ–æ•è·å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œä½¿è„šæœ¬æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚

## å‘½ä»¤æ›¿æ¢çš„è¯­æ³• ğŸ“

åœ¨Bashå’Œå…¶ä»–ç°ä»£Shellä¸­ï¼Œå‘½ä»¤æ›¿æ¢æœ‰ä¸¤ç§ä¸»è¦è¯­æ³•ï¼š

### 1. ä½¿ç”¨åå¼•å·ï¼ˆæ—§è¯­æ³•ï¼‰

```bash
`command`
```

ä¾‹å¦‚ï¼š
```bash
current_date=`date`
echo "Today is $current_date"
```

### 2. ä½¿ç”¨$()ï¼ˆæ¨èè¯­æ³•ï¼‰

```bash
$(command)
```

ä¾‹å¦‚ï¼š
```bash
current_date=$(date)
echo "Today is $current_date"
```

**æ³¨æ„**ï¼šè™½ç„¶ä¸¤ç§è¯­æ³•åœ¨åŠŸèƒ½ä¸ŠåŸºæœ¬ç­‰åŒï¼Œä½†`$()`è¯­æ³•æ›´ç°ä»£ï¼Œæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š
- æ›´æ˜“è¯»ï¼Œç‰¹åˆ«æ˜¯åœ¨åµŒå¥—ä½¿ç”¨æ—¶
- æ›´å®¹æ˜“å¤„ç†ç‰¹æ®Šå­—ç¬¦
- ä¸å…¶ä»–Shellç‰¹æ€§ï¼ˆå¦‚ç®—æœ¯æ‰©å±•ï¼‰çš„è¯­æ³•æ›´ä¸€è‡´

## åŸºæœ¬ç”¨æ³•ç¤ºä¾‹ ğŸŒŸ

### å°†å‘½ä»¤è¾“å‡ºèµ‹å€¼ç»™å˜é‡

```bash
# è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´
current_date=$(date)
echo "Current date and time: $current_date"

# è·å–å½“å‰ç”¨æˆ·
user=$(whoami)
echo "Current user: $user"

# è·å–å½“å‰ç›®å½•
current_dir=$(pwd)
echo "Current directory: $current_dir"
```

### åœ¨å‘½ä»¤å‚æ•°ä¸­ä½¿ç”¨å‘½ä»¤æ›¿æ¢

```bash
# æŸ¥æ‰¾æœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶
ls -l $(find /path/to/dir -type f -mtime -1)

# åˆ é™¤æ‰€æœ‰.tmpæ–‡ä»¶
rm $(find . -name "*.tmp")

# ç»Ÿè®¡ç›®å½•ä¸­çš„æ–‡ä»¶æ•°é‡
echo "Number of files: $(ls | wc -l)"
```

### åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å‘½ä»¤æ›¿æ¢

```bash
echo "Hello, my name is $(whoami) and I am running $(uname -s) on $(hostname)."

message="The current working directory is $(pwd)."
echo "$message"
```

## é«˜çº§ç”¨æ³• ğŸš€

### åµŒå¥—å‘½ä»¤æ›¿æ¢

å‘½ä»¤æ›¿æ¢å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œä½†ä½¿ç”¨`$()`è¯­æ³•æ—¶æ›´æ¸…æ™°ï¼š

```bash
# ä½¿ç”¨$()è¯­æ³•ï¼ˆæ¸…æ™°æ˜“è¯»ï¼‰
echo "The last modified file is: $(ls -l $(find . -type f -printf "%T@ %p\n" | sort -n | tail -1 | cut -d' ' -f2-))"

# ä½¿ç”¨åå¼•å·è¯­æ³•ï¼ˆéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ï¼‰
echo "The last modified file is: `ls -l \`find . -type f -printf "%T@ %p\n" | sort -n | tail -1 | cut -d' ' -f2-\``"
```

### å¤šè¡Œå‘½ä»¤è¾“å‡º

å‘½ä»¤æ›¿æ¢ä¼šæ•è·å‘½ä»¤çš„æ‰€æœ‰è¾“å‡ºï¼ŒåŒ…æ‹¬å¤šè¡Œè¾“å‡ºï¼š

```bash
files=$(ls -la)
echo "Files in current directory:"
echo "$files"  # æ³¨æ„ä½¿ç”¨åŒå¼•å·ä¿ç•™æ¢è¡Œç¬¦
```

### ä¿ç•™æˆ–åˆ é™¤å°¾éšæ¢è¡Œç¬¦

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤æ›¿æ¢ä¼šåˆ é™¤è¾“å‡ºæœ«å°¾çš„æ¢è¡Œç¬¦ã€‚å¦‚æœéœ€è¦ä¿ç•™è¿™äº›æ¢è¡Œç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŠ€å·§ï¼š

```bash
# é»˜è®¤è¡Œä¸ºï¼ˆåˆ é™¤å°¾éšæ¢è¡Œç¬¦ï¼‰
output=$(echo -e "Line 1\nLine 2")
echo "Output: $output"  # è¾“å‡ºåœ¨ä¸€è¡Œ

# ä¿ç•™æ¢è¡Œç¬¦
output=$(echo -e "Line 1\nLine 2\n")
echo "Output: $output"  # ä¿ç•™æ¢è¡Œï¼Œä½†æœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œç¬¦

# å¦ä¸€ç§ä¿ç•™æ¢è¡Œç¬¦çš„æ–¹æ³•
output=$(echo -e "Line 1\nLine 2")
echo "Output: 
$output"  # åœ¨echoå‘½ä»¤ä¸­æ·»åŠ æ¢è¡Œ
```

### åœ¨å¾ªç¯ä¸­ä½¿ç”¨å‘½ä»¤æ›¿æ¢

```bash
# éå†ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶
for file in $(find /path/to/dir -type f -name "*.txt"); do
    echo "Processing $file"
    # å¤„ç†æ–‡ä»¶çš„ä»£ç 
done

# éå†å‘½ä»¤è¾“å‡ºçš„æ¯ä¸€è¡Œ
while read line; do
    echo "Line: $line"
done < <(grep "pattern" file.txt)  # è¿›ç¨‹æ›¿æ¢è¯­æ³•
```

## å‘½ä»¤æ›¿æ¢ä¸å…¶ä»–Shellç‰¹æ€§çš„ç»“åˆ ğŸ”„

### ä¸å˜é‡æ‰©å±•ç»“åˆ

```bash
# è·å–æ–‡ä»¶åï¼ˆä¸å«è·¯å¾„ï¼‰
full_path="/path/to/file.txt"
filename=$(basename "$full_path")
echo "Filename: $filename"

# è·å–ç›®å½•å
dirname=$(dirname "$full_path")
echo "Directory: $dirname"
```

### ä¸ç®—æœ¯æ‰©å±•ç»“åˆ

```bash
# è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
num1=5
num2=7
sum=$((num1 + num2))
echo "Sum: $sum"

# ä½¿ç”¨å‘½ä»¤è¾“å‡ºè¿›è¡Œè®¡ç®—
files_count=$(ls | wc -l)
directories_count=$(ls -d */ 2>/dev/null | wc -l)
total=$((files_count + directories_count))
echo "Total items: $total"
```

### ä¸æ¡ä»¶æµ‹è¯•ç»“åˆ

```bash
# æ£€æŸ¥å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ
if [ "$(grep -c "pattern" file.txt)" -gt 0 ]; then
    echo "Pattern found in file"
else
    echo "Pattern not found in file"
fi

# æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºroot
if [ "$(id -u)" -eq 0 ]; then
    echo "Running as root"
else
    echo "Not running as root"
fi
```

## æ€§èƒ½è€ƒè™‘ âš¡

å‘½ä»¤æ›¿æ¢ä¼šåˆ›å»ºä¸€ä¸ªå­shellæ¥æ‰§è¡Œå‘½ä»¤ï¼Œè¿™å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹è„šæœ¬æˆ–å¾ªç¯ä¸­é¢‘ç¹ä½¿ç”¨æ—¶ï¼š

```bash
# ä½æ•ˆçš„æ–¹å¼ï¼ˆåœ¨å¾ªç¯ä¸­å¤šæ¬¡ä½¿ç”¨å‘½ä»¤æ›¿æ¢ï¼‰
for i in {1..1000}; do
    date_output=$(date)
    echo "Iteration $i: $date_output"
done

# æ›´é«˜æ•ˆçš„æ–¹å¼ï¼ˆåœ¨å¾ªç¯å¤–ä½¿ç”¨å‘½ä»¤æ›¿æ¢ï¼‰
date_output=$(date)
for i in {1..1000}; do
    echo "Iteration $i: $date_output"
done
```

## é”™è¯¯å¤„ç† â—

å‘½ä»¤æ›¿æ¢ä¼šæ•è·å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œä½†ä¸ä¼šæ•è·é”™è¯¯è¾“å‡ºï¼ˆæ ‡å‡†é”™è¯¯ï¼‰ã€‚å¦‚æœéœ€è¦æ•è·é”™è¯¯è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘ï¼š

```bash
# åªæ•è·æ ‡å‡†è¾“å‡º
output=$(ls /nonexistent 2>/dev/null)
echo "Output: $output"  # å¯èƒ½ä¸ºç©ºï¼Œå› ä¸ºé”™è¯¯ä¿¡æ¯è¢«ä¸¢å¼ƒ

# æ•è·æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯
output=$(ls /nonexistent 2>&1)
echo "Output: $output"  # åŒ…å«é”™è¯¯ä¿¡æ¯

# å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶åæ•è·
error_output=$(find /path -name "*.txt" 2>&1 >/dev/null)
echo "Errors: $error_output"  # åªåŒ…å«é”™è¯¯ä¿¡æ¯
```

## å‘½ä»¤æ›¿æ¢çš„æ›¿ä»£æ–¹æ³• ğŸ”„

### 1. è¿›ç¨‹æ›¿æ¢

è¿›ç¨‹æ›¿æ¢æ˜¯ä¸€ç§ç±»ä¼¼äºå‘½ä»¤æ›¿æ¢çš„åŠŸèƒ½ï¼Œä½†å®ƒåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶æè¿°ç¬¦è€Œä¸æ˜¯æ•è·è¾“å‡ºï¼š

```bash
# ä½¿ç”¨è¿›ç¨‹æ›¿æ¢æ¯”è¾ƒä¸¤ä¸ªå‘½ä»¤çš„è¾“å‡º
diff <(ls dir1) <(ls dir2)

# å°†å‘½ä»¤è¾“å‡ºä½œä¸ºæ–‡ä»¶è¾“å…¥
while read line; do
    echo "Line: $line"
done < <(grep "pattern" file.txt)
```

### 2. ç®¡é“

å¯¹äºç®€å•çš„å‘½ä»¤åºåˆ—ï¼Œç®¡é“é€šå¸¸æ¯”å‘½ä»¤æ›¿æ¢æ›´é«˜æ•ˆï¼š

```bash
# ä½¿ç”¨å‘½ä»¤æ›¿æ¢
echo "Lines: $(grep "pattern" file.txt | wc -l)"

# ä½¿ç”¨ç®¡é“ï¼ˆæ›´é«˜æ•ˆï¼‰
grep "pattern" file.txt | wc -l | xargs echo "Lines:"
```

### 3. ç›´æ¥æ‰§è¡Œ

æœ‰æ—¶ï¼Œç›´æ¥æ‰§è¡Œå‘½ä»¤æ¯”æ•è·å…¶è¾“å‡ºæ›´ç®€å•ï¼š

```bash
# ä½¿ç”¨å‘½ä»¤æ›¿æ¢
result=$(command)
if [ "$result" = "expected" ]; then
    echo "Command returned expected result"
fi

# ç›´æ¥æ‰§è¡Œï¼ˆæ›´ç®€å•ï¼‰
if command | grep -q "expected"; then
    echo "Command output contains expected pattern"
fi
```

## å¸¸è§é™·é˜±å’Œé—®é¢˜ âš ï¸

### 1. ç©ºæ ¼å’Œæ¢è¡Œç¬¦å¤„ç†

å‘½ä»¤æ›¿æ¢ä¼šåˆ é™¤è¾“å‡ºæœ«å°¾çš„æ¢è¡Œç¬¦ï¼Œä½†ä¿ç•™å†…éƒ¨çš„æ¢è¡Œç¬¦å’Œç©ºæ ¼ã€‚è¿™å¯èƒ½å¯¼è‡´æ„å¤–çš„è¡Œä¸ºï¼š

```bash
# é—®é¢˜ï¼šæœªå¼•ç”¨çš„å‘½ä»¤æ›¿æ¢ä¼šå¯¼è‡´è¯åˆ†å‰²
files=$(ls)
for file in $files; do  # é”™è¯¯ï¼šæ¯ä¸ªç©ºæ ¼éƒ½ä¼šåˆ†å‰²å‡ºä¸€ä¸ªæ–°å•è¯
    echo "File: $file"
done

# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å¼•å·ä¿ç•™åŸå§‹æ ¼å¼
files=$(ls)
for file in "$files"; do  # é”™è¯¯ï¼šè¿™ä¼šå°†æ•´ä¸ªè¾“å‡ºä½œä¸ºä¸€ä¸ªå•è¯
    echo "File: $file"
done

# æ­£ç¡®æ–¹æ³•ï¼šä½¿ç”¨å¾ªç¯è¯»å–æ¯ä¸€è¡Œ
while IFS= read -r file; do
    echo "File: $file"
done < <(ls)
```

### 2. åµŒå¥—å‘½ä»¤æ›¿æ¢

åµŒå¥—å‘½ä»¤æ›¿æ¢å¯èƒ½å¯¼è‡´å¤æ‚çš„è½¬ä¹‰é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨åå¼•å·æ—¶ï¼š

```bash
# ä½¿ç”¨åå¼•å·ï¼ˆéœ€è¦è½¬ä¹‰å†…éƒ¨åå¼•å·ï¼‰
echo `echo \`date\``

# ä½¿ç”¨$()ï¼ˆæ›´æ¸…æ™°ï¼Œæ— éœ€ç‰¹æ®Šè½¬ä¹‰ï¼‰
echo $(echo $(date))
```

### 3. å‘½ä»¤å¤±è´¥

å¦‚æœå‘½ä»¤æ›¿æ¢ä¸­çš„å‘½ä»¤å¤±è´¥ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœæ­¢è„šæœ¬æ‰§è¡Œï¼š

```bash
# å‘½ä»¤å¤±è´¥ä½†è„šæœ¬ç»§ç»­æ‰§è¡Œ
output=$(nonexistent_command)
echo "After command substitution"  # è¿™è¡Œä»ä¼šæ‰§è¡Œ

# ä½¿ç”¨set -eä½¿è„šæœ¬åœ¨å‘½ä»¤å¤±è´¥æ—¶é€€å‡º
set -e
output=$(nonexistent_command)  # è„šæœ¬å°†åœ¨è¿™é‡Œé€€å‡º
echo "This will not be executed"
```

## å®ç”¨ç¤ºä¾‹ ğŸ“‹

### 1. åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„æ–‡ä»¶å

```bash
# åˆ›å»ºå¸¦æ—¥æœŸçš„å¤‡ä»½æ–‡ä»¶
backup_file="backup_$(date +%Y%m%d_%H%M%S).tar.gz"
tar -czf "$backup_file" /path/to/backup
```

### 2. æ‰¹é‡é‡å‘½åæ–‡ä»¶

```bash
# å°†æ‰€æœ‰.txtæ–‡ä»¶é‡å‘½åä¸º.bak
for file in *.txt; do
    mv "$file" "${file%.txt}.bak"
done
```

### 3. åŠ¨æ€ç”Ÿæˆé…ç½®æ–‡ä»¶

```bash
# ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«å½“å‰ç³»ç»Ÿä¿¡æ¯
cat > config.ini << EOF
[System]
Hostname=$(hostname)
OS=$(uname -s)
Kernel=$(uname -r)
CPU=$(grep "model name" /proc/cpuinfo | head -1 | cut -d: -f2 | xargs)
Memory=$(free -h | grep Mem | awk '{print $2}')
Disk=$(df -h / | tail -1 | awk '{print $2}')
User=$(whoami)
Date=$(date)
EOF
```

### 4. ç›‘æ§ç³»ç»Ÿèµ„æº

```bash
# æ¯5ç§’æ˜¾ç¤ºä¸€æ¬¡ç³»ç»Ÿè´Ÿè½½
while true; do
    load=$(uptime | awk '{print $10 $11 $12}')
    memory=$(free -m | grep Mem | awk '{print $3"/"$2" MB"}')
    disk=$(df -h / | tail -1 | awk '{print $5}')
    echo "$(date +%H:%M:%S) - Load: $load, Memory: $memory, Disk: $disk"
    sleep 5
done
```

### 5. æŸ¥æ‰¾å¹¶å¤„ç†ç‰¹å®šæ–‡ä»¶

```bash
# æŸ¥æ‰¾å¹¶å‹ç¼©æ‰€æœ‰è¶…è¿‡100MBçš„æ—¥å¿—æ–‡ä»¶
for file in $(find /var/log -type f -size +100M -name "*.log"); do
    echo "Compressing $file"
    gzip -9 "$file"
done
```

## å°è´´å£« ğŸ’¡

1. **ä¼˜å…ˆä½¿ç”¨$()**ï¼šå°½é‡ä½¿ç”¨`$()`è¯­æ³•è€Œä¸æ˜¯åå¼•å·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚æˆ–åµŒå¥—çš„æƒ…å†µä¸‹ã€‚

2. **å¼•ç”¨å˜é‡**ï¼šå§‹ç»ˆä½¿ç”¨åŒå¼•å·æ‹¬èµ·å‘½ä»¤æ›¿æ¢çš„ç»“æœï¼Œä»¥ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚

3. **è€ƒè™‘æ€§èƒ½**ï¼šé¿å…åœ¨å¾ªç¯ä¸­é‡å¤ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ›¿æ¢ï¼Œå¯ä»¥åœ¨å¾ªç¯å¤–æ‰§è¡Œä¸€æ¬¡å¹¶å­˜å‚¨ç»“æœã€‚

4. **é”™è¯¯å¤„ç†**ï¼šè€ƒè™‘å‘½ä»¤å¯èƒ½å¤±è´¥çš„æƒ…å†µï¼Œä½¿ç”¨æ¡ä»¶æµ‹è¯•æˆ–è®¾ç½®`set -e`ã€‚

5. **è°ƒè¯•**ï¼šä½¿ç”¨`set -x`æˆ–åœ¨å‘½ä»¤æ›¿æ¢å‰åæ·»åŠ echoè¯­å¥ï¼Œå¸®åŠ©è°ƒè¯•å¤æ‚çš„å‘½ä»¤æ›¿æ¢ã€‚

## ç»ƒä¹ é¢˜ ğŸ§©

1. ç¼–å†™ä¸€ä¸ªå‘½ä»¤ï¼Œæ˜¾ç¤ºå½“å‰ç›®å½•ä¸­æœ€å¤§çš„5ä¸ªæ–‡ä»¶åŠå…¶å¤§å°ã€‚

2. åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œæ¥å—ä¸€ä¸ªç›®å½•è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå¹¶æ˜¾ç¤ºè¯¥ç›®å½•ä¸­çš„æ–‡ä»¶æ•°é‡ã€ç›®å½•æ•°é‡å’Œæ€»å¤§å°ã€‚

3. ç¼–å†™ä¸€ä¸ªå‘½ä»¤ï¼ŒæŸ¥æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹ï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬çš„PIDå’Œå†…å­˜ä½¿ç”¨æƒ…å†µã€‚

4. åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œç”Ÿæˆä¸€ä¸ªHTMLæŠ¥å‘Šï¼Œæ˜¾ç¤ºç³»ç»Ÿçš„åŸºæœ¬ä¿¡æ¯ï¼ˆä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬ã€CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µç­‰ï¼‰ã€‚

5. ç¼–å†™ä¸€ä¸ªå‘½ä»¤ï¼ŒæŸ¥æ‰¾å¹¶æ˜¾ç¤ºæœ€è¿‘24å°æ—¶å†…ä¿®æ”¹è¿‡çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼ˆ.confã€.cfgã€.iniç­‰ï¼‰ã€‚

---

é€šè¿‡æŒæ¡å‘½ä»¤æ›¿æ¢ï¼Œä½ å¯ä»¥åˆ›å»ºæ›´åŠ¨æ€ã€æ›´å¼ºå¤§çš„Shellè„šæœ¬ï¼Œè‡ªåŠ¨åŒ–å„ç§ä»»åŠ¡ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚æ— è®ºæ˜¯ç®€å•çš„ç³»ç»Ÿç®¡ç†ä»»åŠ¡è¿˜æ˜¯å¤æ‚çš„æ•°æ®å¤„ç†ï¼Œå‘½ä»¤æ›¿æ¢éƒ½æ˜¯Shellç¼–ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚
