# Bash脚本编程指南 🚀

## 什么是Bash？ 🤔

Bash（Bourne-Again SHell）是GNU操作系统的命令语言解释器，是一个强大的命令行工具和脚本语言。它的名字是对Unix shell的原创者Stephen Bourne的致敬，同时也是一个双关语（Bourne-Again，意为"重生"）。

## 为什么学习Bash脚本？ 🌟

1. **自动化日常任务** - 减少重复性工作
2. **批量处理文件** - 轻松处理大量文件
3. **系统管理** - 简化系统维护工作
4. **提高工作效率** - 让计算机为你工作

## Bash基础知识 📝

### 创建你的第一个脚本 ✨

让我们从一个简单的"Hello World"脚本开始：

```bash
#!/bin/bash
# 这是一个注释
echo "你好，世界！"
```

这个脚本做了什么？
- 第一行 `#!/bin/bash` 是"shebang"行，告诉系统使用bash来执行这个脚本
- 第二行是注释，以`#`开头
- 第三行使用`echo`命令在屏幕上显示文本

### 如何运行脚本 🏃‍♂️

1. 保存文件，例如命名为`hello.sh`
2. 给脚本添加执行权限：
   ```bash
   chmod +x hello.sh
   ```
3. 运行脚本：
   ```bash
   ./hello.sh
   ```

## 变量 🧩

在Bash中，变量是存储数据的容器。

### 定义变量

```bash
# 定义变量（注意：等号两边不能有空格）
名字="小明"
年龄=25
```

### 使用变量

```bash
# 使用变量时，需要在变量名前加上$符号
echo "我的名字是 $名字，今年 $年龄 岁。"
```

### 特殊变量

Bash有一些特殊变量：
- `$0` - 脚本名称
- `$1`, `$2`, ... - 脚本的第1个、第2个...参数
- `$#` - 参数数量
- `$@` - 所有参数
- `$?` - 上一个命令的退出状态（0表示成功）

## 条件语句 🔀

### if语句

```bash
#!/bin/bash
# 检查用户是否输入了参数
if [ $# -eq 0 ]; then
    echo "错误：请提供一个参数"
    exit 1
elif [ $# -gt 1 ]; then
    echo "警告：只会使用第一个参数"
fi

echo "你提供的参数是：$1"
```

### 比较操作符

数值比较：
- `-eq` - 等于
- `-ne` - 不等于
- `-gt` - 大于
- `-lt` - 小于
- `-ge` - 大于等于
- `-le` - 小于等于

字符串比较：
- `=` - 等于
- `!=` - 不等于
- `-z` - 字符串长度为0
- `-n` - 字符串长度不为0

文件测试：
- `-e` - 文件存在
- `-f` - 是普通文件
- `-d` - 是目录
- `-r` - 可读
- `-w` - 可写
- `-x` - 可执行

## 循环 🔄

### for循环

```bash
#!/bin/bash
# 遍历数字
for i in 1 2 3 4 5; do
    echo "数字：$i"
done

# 遍历文件
for 文件 in *.txt; do
    echo "处理文件：$文件"
done
```

### while循环

```bash
#!/bin/bash
# 倒计时
计数=5
while [ $计数 -gt 0 ]; do
    echo "$计数..."
    计数=$((计数-1))
    sleep 1
done
echo "发射！🚀"
```

## 函数 🧰

函数可以让你组织代码并重用逻辑。

```bash
#!/bin/bash
# 定义一个函数
问候() {
    local 名字=$1  # local关键字定义局部变量
    echo "你好，$名字！"
}

# 调用函数
问候 "小明"
问候 "小红"
```

## 输入和输出 📥📤

### 用户输入

```bash
#!/bin/bash
# 获取用户输入
echo "请输入你的名字："
read 名字
echo "你好，$名字！"
```

### 重定向

```bash
# 将输出写入文件
echo "这是一行文本" > 文件.txt  # 覆盖文件内容

# 将输出追加到文件
echo "这是另一行文本" >> 文件.txt  # 追加到文件末尾

# 从文件读取输入
sort < 未排序.txt  # 将未排序.txt的内容作为sort命令的输入
```

## 实用技巧 💡

### 错误处理

```bash
#!/bin/bash
# 设置遇到错误时退出脚本
set -e

# 捕获错误
command_that_might_fail || { echo "命令失败"; exit 1; }
```

### 调试脚本

```bash
# 在命令行运行时启用调试
bash -x ./my_script.sh

# 或在脚本中启用调试
#!/bin/bash
set -x  # 启用调试
# 你的代码
set +x  # 禁用调试
```

## 练习题 🎯

1. 创建一个脚本，接受一个目录路径作为参数，并列出该目录中的所有文件和子目录。
2. 编写一个脚本，计算1到用户输入的数字之间所有整数的和。
3. 创建一个备份脚本，将指定目录中的所有`.txt`文件复制到一个备份目录，并在文件名后添加当前日期。

## 小贴士 ✨

- 始终给你的脚本添加注释，解释它们的用途和工作原理
- 使用有意义的变量名，提高代码可读性
- 在处理文件和目录时，考虑使用引号包围变量，以处理包含空格的文件名
- 学习阅读手册页（使用`man`命令），它们包含了大量有用信息

## 下一步学习 🚶‍♂️

- 学习更多Bash高级特性，如数组和关联数组
- 探索正则表达式和文本处理工具（grep, sed, awk）
- 学习如何使用Bash与系统服务交互
- 尝试编写更复杂的脚本来自动化你的日常任务

记住，熟能生巧！通过不断练习和编写脚本，你将逐渐掌握Bash脚本编程的艺术。祝你学习愉快！🎉
